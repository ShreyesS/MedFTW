import requests
from ApiFunctions import *
import os

ids = ['1', '778', '1585', '2333', '3165', '3536', '3840', '4157', '4801', '5708', '6488', '8071', '9375', '9921', '10382', '11775', '12565', '12805', '12943', '13241', '13540', '13848', '13931', '14493', '14839', '15389', '16034', '17744', '18235', '18448', '18875', '19628', '20115', '20800', '21401', '21603', '22606', '23174', '23514', '23889', '24530', '26102', '26688', '27121', '27688', '28593', '29888', '31073', '31428', '32094', '32736', '33548', '34331', '34774', '35296', '35631', '36227', '37011', '37876', '38878', '41432', '42014', '42313', '42981', '43202', '43339', '44167', '44767', '45074', '45837', '46080', '46413', '47037', '47795', '48130', '48696', '51996', '54227', '54510', '55841', '56822', '57214', '57432', '58610', '60140', '60223', '60619', '60736', '61083', '62773', '63516', '63739', '64130', '65128', '65342', '66080', '66652', '67068', '67583', '68376', '69992', '70482', '71223', '71564', '72064', '73036', '74024', '74437', '74661', '76477', '77374', '77749', '79373', '82448', '83383', '83855', '84623', '85047', '85472', '85827', '86192', '87142', '88043', '88257', '88437', '88726', '89508', '91109', '92003', '92583', '92918', '93921', '95138', '96094', '97552', '98361', '99298', '99518', '99817', '100394', '101467', '101801', '102258', '102633', '103203', '103506', '104008', '104549', '105540', '106972', '107517', '108415', '110179', '110627', '111058', '111555', '112429', '112788', '113464', '113813', '114767', '116323', '116906', '117506', '119087', '119377', '120083', '120410', '121214', '121991', '122711', '123724', '124166', '124943', '125186', '127144', '127737', '127980', '128365', '128935', '129502', '130054', '131269', '131784', '133206', '133828', '134419', '134817', '135719', '136145', '137064', '138244', '138934', '139280', '139660', '140768', '141555', '142268', '142386', '142844', '143317', '144401', '145900', '146718', '147615', '148132', '148542', '149072', '149354', '149723', '150131', '150436', '150771', '151477', '154354', '155452', '155828', '156469', '156641', '157189', '157896', '159093', '159969', '160443', '161071', '162022', '163384', '165029', '165537', '166785', '168238', '169770', '171151', '171596', '171944', '172282', '173226', '173648', '174442', '175848', '175931', '177919', '178382', '178909', '179241', '179525', '179805', '180538', '180895', '181968', '183264', '183876', '184198', '186447', '187058', '187328', '187676', '188096', '188216', '189088', '191123', '192187', '193560', '194589', '194854', '195469', '196537', '198425', '198781', '199297', '200584', '200967', '202335', '202760', '203172', '203640', '203938', '205125', '206800', '207235', '208041', '208537', '208777', '210661', '210969', '212455']

names = []
for patient in ids:
    p = getPatientById(patient)
    name = p['name'][0]
    RealName = []
    if 'prefix' in name.keys():
        RealName.append(name['prefix'][0])
    if 'given' in name.keys():
        RealName.append(name['given'][0] + " ")
    if 'family' in name.keys():
        RealName.append(name['family'])

    names.append(RealName)
    print(patient)

with open('PatientNames.txt', 'x') as f:
    f.write(str(names))




    


    